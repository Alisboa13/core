<div *ngIf="indicatorResults$ | async as indicatorResults; else loading">
  <section>
    <div class="container">
      <div class="heading-block">
        <h2>{{ indicatorGroup.name }}</h2>
      </div>

      <!--Dropdown Year Filter-->
      Seleccione los a単os a calcular:
      <div ngbDropdown class="d-inline-block dropdown">
        <button class="btn btn-primary" id="dropdownBasic1" ngbDropdownToggle>{{ selection }} <i class="fa fa-caret-down"></i> </button>             
        <ul class="dropdown-menu" ngbDropdownMenu aria-labelledby="dropdownBasic1">          
          <li><a class="dropdown-item" (click)="calcularIndicadores('Todos los a単os')">Todos los a単os</a></li>          
          <li *ngFor="let year of years"><a class="dropdown-item" (click)="calcularIndicadores(year)">A単o {{ year }}</a></li>          
        </ul>
      </div>
      <br>

      <!-- end col-md-12 -->
    </div>
    <!-- end container -->
  </section>
  <!-- end page-section -->
  <section>
    <div id="statistic-section" class="statistic-bg" data-stellar-background-ratio="0">
      <div class="container">
        <div class="row">
  
          <ng-template ngFor let-indicator [ngForOf]="indicatorGroup.indicators" let-i="index" [ngForTrackBy]="trackByFn">
            <!--separador-->
            <div *ngIf="(i%3===0) && (i>0)" class="col-md-12" style="border: 15px solid transparent;"></div>
            <!-- end col-xs-6 col-sm-3 col-md-3 -->
            <div class="col-xs-6 col-sm-3 col-md-4">
              <a class="active" href="/indicator/{{ indicator.indicatorID }}">
                <div class="services-content">
                  <div class="statistic-percent" [attr.data-perc]="'indicatorResults[indicator.indicatorID-1]'">
                    <div class="fact">

                      <div *ngIf="indicator.type == 2; else noPercent">
                        <span class="percentfactor">{{ indicatorResults[indicator.indicatorID-1] | number:'.0-2'}}%</span>
                      </div>
                      <ng-template #noPercent>
                         <span class="percentfactor">{{ indicatorResults[indicator.indicatorID-1] | number:'.0-2'}}</span>
                      </ng-template>
                      
                      <p>{{ indicator.name }}</p>
                    </div>
                    <!-- end fact -->
                  </div>
                  <!-- end statistic-percent -->
                </div>
                <!-- end col-xs-6 col-sm-3 col-md-3 -->
              </a>
            </div>
          </ng-template>
        </div>
        <!-- end row -->
      </div>
      <!-- end container -->
    </div>
    <!-- end statistic-section -->
  </section>
    <!-- End statistic section -->
</div>

<ng-template #loading>
    Cargando...
</ng-template>
